// Postgres schema generated by https://github.com/tyleragreen/gtfs-schema
// and converted to DBML by https://dbdiagram.io/d
// Docs: https://dbml.dbdiagram.io/docs

Table "agency" {
  "agency_id" text [pk]
  "agency_name" text [not null]
  "agency_url" text [not null]
  "agency_timezone" text [not null]
  "agency_lang" text
  "agency_phone" text
  "agency_fare_url" text
  "agency_email" text
}

Table "areas" {
  "area_id" text [pk, not null]
  "area_name" text
}

Table "attributions" {
  "attribution_id" text
  "agency_id" text
  "route_id" text
  "trip_id" text
  "organization_name" text [not null]
  "is_producer" integer
  "is_operator" integer
  "is_authority" integer
  "attribution_url" text
  "attribution_email" text
  "attribution_phone" text
}

Table "board_alight" {
  "trip_id" text [not null]
  "stop_id" text [not null]
  "stop_sequence" integer [not null]
  "record_use" integer [not null]
  "schedule_relationship" integer
  "boardings" integer
  "alightings" integer
  "current_load" integer
  "load_count" integer
  "load_type" integer
  "rack_down" integer
  "bike_boardings" integer
  "bike_alightings" integer
  "ramp_used" integer
  "ramp_boardings" integer
  "ramp_alightings" integer
  "service_date" date
  "service_arrival_time" text
  "service_arrival_timestamp" integer
  "service_departure_time" text
  "service_departure_timestamp" integer
  "source" integer

  Indexes {
    record_use [name: "idx_board_alight_record_use"]
    service_arrival_timestamp [name: "idx_board_alight_service_arrival_timestamp"]
    service_date [name: "idx_board_alight_service_date"]
    service_departure_timestamp [name: "idx_board_alight_service_departure_timestamp"]
    stop_id [name: "idx_board_alight_stop_id"]
    stop_sequence [name: "idx_board_alight_stop_sequence"]
    trip_id [name: "idx_board_alight_trip_id"]
  }
}

Table "booking_rules" {
  "booking_rule_id" text [pk]
  "booking_type" integer [not null]
  "prior_notice_duration_min" integer
  "prior_notice_duration_max" integer
  "prior_notice_last_day" integer
  "prior_notice_last_time" text
  "prior_notice_last_timestamp" integer
  "prior_notice_start_day" integer
  "prior_notice_start_time" text
  "prior_notice_start_timestamp" integer
  "prior_notice_service_id" text
  "message" text
  "pickup_message" text
  "drop_off_message" text
  "phone_number" text
  "info_url" text
  "booking_url" text

  Indexes {
    prior_notice_last_timestamp [name: "idx_booking_rules_prior_notice_last_timestamp"]
    prior_notice_start_timestamp [name: "idx_booking_rules_prior_notice_start_timestamp"]
  }
}

Table "calendar" {
  "service_id" text [pk, not null]
  "monday" integer [not null]
  "tuesday" integer [not null]
  "wednesday" integer [not null]
  "thursday" integer [not null]
  "friday" integer [not null]
  "saturday" integer [not null]
  "sunday" integer [not null]
  "start_date" date [not null]
  "end_date" date [not null]

  Indexes {
    end_date [name: "idx_calendar_end_date"]
    start_date [name: "idx_calendar_start_date"]
  }
}

Table "calendar_attributes" {
  "service_id" text [pk]
  "service_description" text [not null]
}

Table "calendar_dates" {
  "service_id" text [not null]
  "date" date [not null]
  "exception_type" integer [not null]
  "holiday_name" text

  Indexes {
    (service_id, date) [pk]
    exception_type [name: "idx_calendar_dates_exception_type"]
  }
}

Table "deadhead_times" {
  "id" integer [pk]
  "deadhead_id" text [not null]
  "arrival_time" text [not null]
  "arrival_timestamp" integer
  "departure_time" text [not null]
  "departure_timestamp" integer
  "ops_location_id" text
  "stop_id" text
  "location_sequence" integer [not null]
  "shape_dist_traveled" real

  Indexes {
    arrival_timestamp [name: "idx_deadhead_times_arrival_timestamp"]
    deadhead_id [name: "idx_deadhead_times_deadhead_id"]
    departure_timestamp [name: "idx_deadhead_times_departure_timestamp"]
    location_sequence [name: "idx_deadhead_times_location_sequence"]
  }
}

Table "deadheads" {
  "deadhead_id" text [pk, not null]
  "service_id" text [not null]
  "block_id" text [not null]
  "shape_id" text
  "to_trip_id" text
  "from_trip_id" text
  "to_deadhead_id" text
  "from_deadhead_id" text

  Indexes {
    block_id [name: "idx_deadheads_block_id"]
    from_deadhead_id [name: "idx_deadheads_from_deadhead_id"]
    from_trip_id [name: "idx_deadheads_from_trip_id"]
    shape_id [name: "idx_deadheads_shape_id"]
    to_deadhead_id [name: "idx_deadheads_to_deadhead_id"]
    to_trip_id [name: "idx_deadheads_to_trip_id"]
  }
}

Table "directions" {
  "route_id" text [not null]
  "direction_id" integer
  "direction" text [not null]

  Indexes {
    (route_id, direction_id) [pk]
  }
}

Table "fare_attributes" {
  "fare_id" text [pk, not null]
  "price" real [not null]
  "currency_type" text [not null]
  "payment_method" integer [not null]
  "transfers" integer
  "agency_id" text
  "transfer_duration" integer
}

Table "fare_leg_rules" {
  "leg_group_id" text
  "network_id" text
  "from_area_id" text
  "to_area_id" text
  "from_timeframe_group_id" text
  "to_timeframe_group_id" text
  "fare_product_id" text [not null]
  "rule_priority" integer

  Indexes {
    (network_id, from_area_id, to_area_id, from_timeframe_group_id, to_timeframe_group_id, fare_product_id) [pk]
  }
}

Table "fare_media" {
  "fare_media_id" text [pk, not null]
  "fare_media_name" text
  "fare_media_type" integer [not null]
}

Table "fare_products" {
  "fare_product_id" text [not null]
  "fare_product_name" text
  "fare_media_id" text
  "amount" real [not null]
  "currency" text [not null]

  Indexes {
    (fare_product_id, fare_media_id) [pk]
  }
}

Table "fare_rules" {
  "fare_id" text [not null]
  "route_id" text
  "origin_id" text
  "destination_id" text
  "contains_id" text
}

Table "fare_transfer_rules" {
  "from_leg_group_id" text
  "to_leg_group_id" text
  "transfer_count" integer
  "duration_limit" integer
  "duration_limit_type" integer
  "fare_transfer_type" integer [not null]
  "fare_product_id" text

  Indexes {
    (from_leg_group_id, to_leg_group_id, transfer_count, duration_limit, fare_product_id) [pk]
  }
}

Table "feed_info" {
  "feed_publisher_name" text [not null]
  "feed_publisher_url" text [not null]
  "feed_lang" text [not null]
  "default_lang" text
  "feed_start_date" date
  "feed_end_date" date
  "feed_version" text
  "feed_contact_email" text
  "feed_contact_url" text
}

Table "frequencies" {
  "trip_id" text [not null]
  "start_time" text [not null]
  "start_timestamp" integer
  "end_time" text [not null]
  "end_timestamp" integer
  "headway_secs" integer [not null]
  "exact_times" integer

  Indexes {
    (trip_id, start_time) [pk]
  }
}

Table "levels" {
  "level_id" text [pk, not null]
  "level_index" real [not null]
  "level_name" text
}

Table "location_group_stops" {
  "location_group_id" text [not null]
  "stop_id" text [not null]

  Indexes {
    location_group_id [name: "idx_location_group_stops_location_group_id"]
    stop_id [name: "idx_location_group_stops_stop_id"]
  }
}

Table "location_groups" {
  "location_group_id" text [pk]
  "location_group_name" text
}

Table "locations" {
  "geojson" text
}

Table "networks" {
  "network_id" text [pk, not null]
  "network_name" text
}

Table "ops_locations" {
  "ops_location_id" text [pk, not null]
  "ops_location_code" text
  "ops_location_name" text [not null]
  "ops_location_desc" text
  "ops_location_lat" real [not null]
  "ops_location_lon" real [not null]
}

Table "pathways" {
  "pathway_id" text [pk, not null]
  "from_stop_id" text [not null]
  "to_stop_id" text [not null]
  "pathway_mode" integer [not null]
  "is_bidirectional" integer [not null]
  "length" real
  "traversal_time" integer
  "stair_count" integer
  "max_slope" real
  "min_width" real
  "signposted_as" text
  "reversed_signposted_as" text
}

Table "ride_feed_info" {
  "ride_files" integer [not null]
  "ride_start_date" date
  "ride_end_date" date
  "gtfs_feed_date" date
  "default_currency_type" text
  "ride_feed_version" text

  Indexes {
    gtfs_feed_date [name: "idx_ride_feed_info_gtfs_feed_date"]
    ride_end_date [name: "idx_ride_feed_info_ride_end_date"]
    ride_start_date [name: "idx_ride_feed_info_ride_start_date"]
  }
}

Table "rider_trip" {
  "rider_id" text [pk]
  "agency_id" text
  "trip_id" text
  "boarding_stop_id" text
  "boarding_stop_sequence" integer
  "alighting_stop_id" text
  "alighting_stop_sequence" integer
  "service_date" date
  "boarding_time" text
  "boarding_timestamp" integer
  "alighting_time" text
  "alighting_timestamp" integer
  "rider_type" integer
  "rider_type_description" text
  "fare_paid" real
  "transaction_type" integer
  "fare_media" integer
  "accompanying_device" integer
  "transfer_status" integer

  Indexes {
    agency_id [name: "idx_rider_trip_agency_id"]
    alighting_stop_id [name: "idx_rider_trip_alighting_stop_id"]
    alighting_stop_sequence [name: "idx_rider_trip_alighting_stop_sequence"]
    alighting_timestamp [name: "idx_rider_trip_alighting_timestamp"]
    boarding_stop_id [name: "idx_rider_trip_boarding_stop_id"]
    boarding_stop_sequence [name: "idx_rider_trip_boarding_stop_sequence"]
    boarding_timestamp [name: "idx_rider_trip_boarding_timestamp"]
    service_date [name: "idx_rider_trip_service_date"]
    trip_id [name: "idx_rider_trip_trip_id"]
  }
}

Table "ridership" {
  "total_boardings" integer [not null]
  "total_alightings" integer [not null]
  "ridership_start_date" date
  "ridership_end_date" date
  "ridership_start_time" text
  "ridership_start_timestamp" integer
  "ridership_end_time" text
  "ridership_end_timestamp" integer
  "service_id" text
  "monday" integer
  "tuesday" integer
  "wednesday" integer
  "thursday" integer
  "friday" integer
  "saturday" integer
  "sunday" integer
  "agency_id" text
  "route_id" text
  "direction_id" integer
  "trip_id" text
  "stop_id" text

  Indexes {
    agency_id [name: "idx_ridership_agency_id"]
    direction_id [name: "idx_ridership_direction_id"]
    ridership_end_date [name: "idx_ridership_ridership_end_date"]
    ridership_end_timestamp [name: "idx_ridership_ridership_end_timestamp"]
    ridership_start_date [name: "idx_ridership_ridership_start_date"]
    ridership_start_timestamp [name: "idx_ridership_ridership_start_timestamp"]
    route_id [name: "idx_ridership_route_id"]
    service_id [name: "idx_ridership_service_id"]
  }
}

Table "route_attributes" {
  "route_id" text [pk]
  "category" integer [not null]
  "subcategory" integer [not null]
  "running_way" integer [not null]
}

Table "route_networks" {
  "network_id" text [not null]
  "route_id" text [pk]

  Indexes {
    route_id [name: "idx_route_networks_route_id"]
  }
}

Table "routes" {
  "route_id" text [pk, not null]
  "agency_id" text
  "route_short_name" text
  "route_long_name" text
  "route_desc" text
  "route_type" integer [not null]
  "route_url" text
  "route_color" text
  "route_text_color" text
  "route_sort_order" integer
  "continuous_pickup" integer
  "continuous_drop_off" integer
  "network_id" text
}

Table "run_event" {
  "run_event_id" text [pk, not null]
  "piece_id" text [not null]
  "event_type" integer [not null]
  "event_name" text
  "event_time" text [not null]
  "event_duration" integer [not null]
  "event_from_location_type" integer
  "event_from_location_id" text
  "event_to_location_type" integer
  "event_to_location_id" text

  Indexes {
    event_from_location_type [name: "idx_run_event_event_from_location_type"]
    event_to_location_type [name: "idx_run_event_event_to_location_type"]
    event_type [name: "idx_run_event_event_type"]
  }
}

Table "runs_pieces" {
  "run_id" text [not null]
  "piece_id" text [pk, not null]
  "start_type" integer [not null]
  "start_trip_id" text [not null]
  "start_trip_position" integer
  "end_type" integer [not null]
  "end_trip_id" text [not null]
  "end_trip_position" integer

  Indexes {
    end_trip_id [name: "idx_runs_pieces_end_trip_id"]
    end_type [name: "idx_runs_pieces_end_type"]
    start_trip_id [name: "idx_runs_pieces_start_trip_id"]
    start_type [name: "idx_runs_pieces_start_type"]
  }
}

Table "service_alert_targets" {
  "alert_id" text [pk, not null]
  "stop_id" text
  "route_id" text
  "created_timestamp" integer [not null]
  "expiration_timestamp" integer [not null]

  Indexes {
    route_id [name: "idx_service_alert_targets_route_id"]
    stop_id [name: "idx_service_alert_targets_stop_id"]
  }
}

Table "service_alerts" {
  "id" text [pk, not null]
  "cause" integer [not null]
  "start_time" text [not null]
  "end_time" text [not null]
  "headline" text [not null]
  "description" text [not null]
  "created_timestamp" integer [not null]
  "expiration_timestamp" integer [not null]

  Indexes {
    id [name: "idx_service_alerts_id"]
  }
}

Table "shapes" {
  "shape_id" text [not null]
  "shape_pt_lat" real [not null]
  "shape_pt_lon" real [not null]
  "shape_pt_sequence" integer [not null]
  "shape_dist_traveled" real

  Indexes {
    (shape_id, shape_pt_sequence) [pk]
  }
}

Table "stop_areas" {
  "area_id" text [not null]
  "stop_id" text [not null]
}

Table "stop_attributes" {
  "stop_id" text [pk, not null]
  "accessibility_id" integer
  "cardinal_direction" text
  "relative_position" text
  "stop_city" text
}

Table "stop_time_updates" {
  "trip_id" text
  "trip_start_time" text
  "direction_id" integer
  "route_id" text
  "stop_id" text
  "stop_sequence" integer
  "arrival_delay" integer
  "departure_delay" integer
  "departure_timestamp" text
  "arrival_timestamp" text
  "schedule_relationship" text
  "created_timestamp" integer [not null]
  "expiration_timestamp" integer [not null]

  Indexes {
    route_id [name: "idx_stop_time_updates_route_id"]
    stop_id [name: "idx_stop_time_updates_stop_id"]
    trip_id [name: "idx_stop_time_updates_trip_id"]
  }
}

Table "stop_times" {
  "trip_id" text [not null]
  "arrival_time" text
  "arrival_timestamp" integer
  "departure_time" text
  "departure_timestamp" integer
  "location_group_id" text
  "location_id" text
  "stop_id" text [not null]
  "stop_sequence" integer [not null]
  "stop_headsign" text
  "start_pickup_drop_off_window" text
  "start_pickup_drop_off_window_timestamp" integer
  "pickup_type" integer
  "drop_off_type" integer
  "continuous_pickup" integer
  "continuous_drop_off" integer
  "shape_dist_traveled" real
  "timepoint" integer
  "pickup_booking_rule_id" text
  "drop_off_booking_rule_id" text

  Indexes {
    (trip_id, stop_sequence) [pk]
    arrival_timestamp [name: "idx_stop_times_arrival_timestamp"]
    departure_timestamp [name: "idx_stop_times_departure_timestamp"]
    drop_off_booking_rule_id [name: "idx_stop_times_drop_off_booking_rule_id"]
    location_group_id [name: "idx_stop_times_location_group_id"]
    location_id [name: "idx_stop_times_location_id"]
    pickup_booking_rule_id [name: "idx_stop_times_pickup_booking_rule_id"]
    start_pickup_drop_off_window_timestamp [name: "idx_stop_times_start_pickup_drop_off_window_timestamp"]
    stop_id [name: "idx_stop_times_stop_id"]
  }
}

Table "stops" {
  "stop_id" text [pk, not null]
  "stop_code" text
  "stop_name" text
  "tts_stop_name" text
  "stop_desc" text
  "stop_lat" real
  "stop_lon" real
  "zone_id" text
  "stop_url" text
  "location_type" integer
  "location_sub_type" text
  "parent_station" text
  "stop_timezone" text
  "wheelchair_boarding" integer
  "level_id" text
  "platform_code" text

  Indexes {
    parent_station [name: "idx_stops_parent_station"]
  }
}

Table "timeframes" {
  "timeframe_group_id" text [pk]
  "start_time" text
  "end_time" text
  "service_id" text [not null]

  Indexes {
    service_id [name: "idx_timeframes_service_id"]
  }
}

Table "timetable_notes" {
  "note_id" text [pk]
  "symbol" text
  "note" text
}

Table "timetable_notes_references" {
  "note_id" text
  "timetable_id" text
  "route_id" text
  "trip_id" text
  "stop_id" text
  "stop_sequence" integer
  "show_on_stoptime" integer

  Indexes {
    route_id [name: "idx_timetable_notes_references_route_id"]
    stop_id [name: "idx_timetable_notes_references_stop_id"]
    stop_sequence [name: "idx_timetable_notes_references_stop_sequence"]
    timetable_id [name: "idx_timetable_notes_references_timetable_id"]
    trip_id [name: "idx_timetable_notes_references_trip_id"]
  }
}

Table "timetable_pages" {
  "timetable_page_id" text [pk]
  "timetable_page_label" text
  "filename" text
}

Table "timetable_stop_order" {
  "id" integer [pk]
  "timetable_id" text
  "stop_id" text
  "stop_sequence" integer

  Indexes {
    stop_sequence [name: "idx_timetable_stop_order_stop_sequence"]
    timetable_id [name: "idx_timetable_stop_order_timetable_id"]
  }
}

Table "timetables" {
  "id" integer [pk]
  "timetable_id" text
  "route_id" text
  "direction_id" integer
  "start_date" date
  "end_date" date
  "monday" integer [not null]
  "tuesday" integer [not null]
  "wednesday" integer [not null]
  "thursday" integer [not null]
  "friday" integer [not null]
  "saturday" integer [not null]
  "sunday" integer [not null]
  "start_time" text
  "start_timestamp" integer
  "end_time" text
  "end_timestamp" integer
  "timetable_label" text
  "service_notes" text
  "orientation" text
  "timetable_page_id" text
  "timetable_sequence" integer
  "direction_name" text
  "include_exceptions" integer
  "show_trip_continuation" integer

  Indexes {
    timetable_sequence [name: "idx_timetables_timetable_sequence"]
  }
}

Table "transfers" {
  "from_stop_id" text
  "to_stop_id" text
  "from_route_id" text
  "to_route_id" text
  "from_trip_id" text
  "to_trip_id" text
  "transfer_type" integer
  "min_transfer_time" integer

  Indexes {
    (from_stop_id, to_stop_id, from_route_id, to_route_id, from_trip_id, to_trip_id) [pk]
  }
}

Table "translations" {
  "table_name" text [not null]
  "field_name" text [not null]
  "language" text [not null]
  "translation" text [not null]
  "record_id" text
  "record_sub_id" text
  "field_value" text

  Indexes {
    (table_name, field_name, language, record_id, record_sub_id, field_value) [pk]
  }
}

Table "trip_capacity" {
  "agency_id" text
  "trip_id" text
  "service_date" date
  "vehicle_description" text
  "seated_capacity" integer
  "standing_capacity" integer
  "wheelchair_capacity" integer
  "bike_capacity" integer

  Indexes {
    agency_id [name: "idx_trip_capacity_agency_id"]
    service_date [name: "idx_trip_capacity_service_date"]
    trip_id [name: "idx_trip_capacity_trip_id"]
  }
}

Table "trip_updates" {
  "update_id" text [pk, not null]
  "vehicle_id" text
  "trip_id" text
  "trip_start_time" text
  "direction_id" integer
  "route_id" text
  "start_date" text
  "timestamp" text
  "schedule_relationship" text
  "created_timestamp" integer [not null]
  "expiration_timestamp" integer [not null]

  Indexes {
    route_id [name: "idx_trip_updates_route_id"]
    trip_id [name: "idx_trip_updates_trip_id"]
    update_id [name: "idx_trip_updates_update_id"]
    vehicle_id [name: "idx_trip_updates_vehicle_id"]
  }
}

Table "trips" {
  "route_id" text [not null]
  "service_id" text [not null]
  "trip_id" text [pk, not null]
  "trip_headsign" text
  "trip_short_name" text
  "direction_id" integer
  "block_id" text
  "shape_id" text
  "wheelchair_accessible" integer
  "bikes_allowed" integer

  Indexes {
    block_id [name: "idx_trips_block_id"]
    direction_id [name: "idx_trips_direction_id"]
    route_id [name: "idx_trips_route_id"]
    service_id [name: "idx_trips_service_id"]
    shape_id [name: "idx_trips_shape_id"]
  }
}

Table "trips_dated_vehicle_journey" {
  "trip_id" text [not null]
  "operating_day_date" text [not null]
  "dated_vehicle_journey_gid" text [not null]
  "journey_number" integer

  Indexes {
    journey_number [name: "idx_trips_dated_vehicle_journey_journey_number"]
    operating_day_date [name: "idx_trips_dated_vehicle_journey_operating_day_date"]
    trip_id [name: "idx_trips_dated_vehicle_journey_trip_id"]
  }
}

Table "vehicle_positions" {
  "update_id" text [pk, not null]
  "bearing" real
  "latitude" real
  "longitude" real
  "speed" real
  "current_stop_sequence" integer
  "trip_id" text
  "trip_start_date" text
  "trip_start_time" text
  "congestion_level" text
  "occupancy_status" text
  "occupancy_percentage" integer
  "vehicle_stop_status" text
  "vehicle_id" text
  "vehicle_label" text
  "vehicle_license_plate" text
  "vehicle_wheelchair_accessible" text
  "timestamp" text
  "created_timestamp" integer [not null]
  "expiration_timestamp" integer [not null]

  Indexes {
    trip_id [name: "idx_vehicle_positions_trip_id"]
    trip_start_date [name: "idx_vehicle_positions_trip_start_date"]
    trip_start_time [name: "idx_vehicle_positions_trip_start_time"]
    update_id [name: "idx_vehicle_positions_update_id"]
    vehicle_id [name: "idx_vehicle_positions_vehicle_id"]
  }
}
